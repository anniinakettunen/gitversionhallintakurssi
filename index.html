<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hello</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <main>
    <h1>Hei maailma!</h1>

    <!-- Nappi poistettu -->
    <div id="datetime"></div>
  </main>

  <script>
    function setTime() {
      const now = new Date();

      const dateOptions = {
        weekday: 'short',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
      };
      const date = now.toLocaleDateString('fi-FI');

      const datetime = `<p>Tänään on ${date}</p>`;
      const clock = '<canvas id="analogClock" width="102" height="102" style="margin: 10px">Clock</canvas>';

      document.getElementById("datetime").innerHTML = datetime + clock;
    }

    // Näytetään kellonaika heti ja päivitetään sekunnin välein
    setTime();
    setInterval(setTime, 1000);

    // Analogisen kellon setup
    setupAnalogClock(document.getElementById("analogClock"), 100);

    function setupAnalogClock(canvas, clockWidth) {
      var ctx = canvas.getContext("2d");
      var centerX = canvas.width / 2;
      var centerY = canvas.height / 2;

      function tick() {
        var date = new Date();
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawStatic();

        var hours = date.getHours();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        drawHand(clockWidth / 3, hours * 30);

        var minutes = date.getMinutes();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        drawHand(clockWidth / 2, minutes * 6);

        var seconds = date.getSeconds();
        ctx.strokeStyle = "red";
        ctx.lineWidth = 1;
        drawHand(clockWidth / 2, seconds * 6);

        function drawStatic() {
          ctx.beginPath();
          ctx.arc(centerX, centerY, clockWidth / 2, 0, 2 * Math.PI, false);
          ctx.strokeStyle = "black";
          ctx.lineWidth = 2;
          ctx.stroke();
          ctx.closePath();

          ctx.beginPath();
          ctx.arc(centerX, centerY, 2, 0, 2 * Math.PI, false);
          ctx.fillStyle = "black";
          ctx.fill();
          ctx.closePath();

          drawNumbers();

          function drawNumbers() {
            var i = 12;
            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            while (i > 0) {
              ctx.save();
              ctx.beginPath();
              ctx.translate(centerX, centerY);
              var angle = (i * 30) * Math.PI / 180;
              ctx.rotate(angle);
              ctx.translate(0, -clockWidth / 2);
              ctx.moveTo(0, 0);
              ctx.lineTo(0, 10);
              ctx.stroke();
              ctx.closePath();
              ctx.restore();
              i--;
            }
          }
        }

        function drawHand(length, angle) {
          ctx.save();
          ctx.beginPath();
          ctx.translate(centerX, centerY);
          ctx.rotate(-180 * Math.PI / 180); // Korjaus
          ctx.rotate(angle * Math.PI / 180);
          ctx.moveTo(0, 0);
          ctx.lineTo(0, length);
          ctx.stroke();
          ctx.closePath();
          ctx.restore();
        }
      }

      tick();
      window.setInterval(tick, 1000);
    }
  </script>

</body>
</html>
